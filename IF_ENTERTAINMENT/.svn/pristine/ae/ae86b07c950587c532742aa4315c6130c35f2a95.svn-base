<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib uri="http://www.springframework.org/security/tags" prefix="sec" %>
<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="UTF-8">
<meta id="_csrf" name="_csrf" content=${_csrf.token }>
<meta id="_csrf_header" name="_csrf_header" content=${_csrf.headerName }>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=b0e81bb721b9e121366ca32dad175741&libraries=services"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>
<script src="https://www.google.com/recaptcha/api.js" async defer></script>

	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="" />
	<meta name="keywords" content="" />
	<title>If entertainment íšŒì›ê°€ì…</title>
	<link rel="icon" href="images/fav.png" type="image/png" sizes="16x16">

	<link rel="stylesheet" href="${pageContext.request.contextPath }/resources/css/main.min.css">
	<link rel="stylesheet" href="${pageContext.request.contextPath }/resources/css/style.css">
	<link rel="stylesheet" href="${pageContext.request.contextPath }/resources/css/color.css">
	<link rel="stylesheet" href="${pageContext.request.contextPath }/resources/css/responsive.css">

	<style>
		@font-face {
			font-family: 'LOTTERIACHAB';
			src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2302@1.0/LOTTERIACHAB.woff2') format('woff2');
			font-weight: normal;
			font-style: normal;
		}

		@font-face {
			font-family: 'GmarketSansMedium';
			src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2001@1.1/GmarketSansMedium.woff') format('woff');
			font-weight: normal;
			font-style: normal;
		}

		body {
			font-family: 'GmarketSansMedium', sans-serif;
		}

		.medium-opacity:before {
			-webkit-opacity: .1;
			-moz-opacity: .1;
			-ms-opacity: .1;
			-o-opacity: .1;
			opacity: .1;
		}

		.radio {
			display: flex;
			flex-direction: row;
		}

		.line-spacing {
        margin-bottom: 20px; /* ì›í•˜ëŠ” ê°„ê²©(px)ìœ¼ë¡œ ì¡°ì ˆí•©ë‹ˆë‹¤. */
    }

		.gap.signin .bg-image {
    height: 100%;
		}

		.gap.signin:before {
    z-index: 0;
    height: 100%;
		}

	</style>


</head>

<body>
	<div class="www-layout">
		<section>
			<div class="gap no-gap signin whitish medium-opacity register">
				<div class="bg-image"
					style="background-image:url(https://blog.kakaocdn.net/dn/bieOxc/btqDQUnJdRk/eV2wvjXYaqZJUVgP2yKnq1/img.jpg)">
				</div>
				<div class="container">
					<div class="row">
						<div class="col-lg-3">
							<div class="big-ad" style="text-align: center;">
								<div class="profile-author-thumb" id="imagePreview">
									<img alt="author"
										src="https://thumb.mtstarnews.com/06/2023/08/2023082118182730957_1.jpg/dims/optimize"
										style="width: 150px; height: 150px;">
									<div class="edit-dp">
										<label class="fileContainer">
											<i class="fa fa-camera"></i>
											<input type="file" id="imgFile" name="imgFile">
										</label>
									</div>
								</div>
								<figure style="font-family: 'LOTTERIACHAB'; font-size: 30px; padding: 10px; color: white;">
									If entertainment<br /> Sign Up <i class="fa-brands fa-waze"></i>
									<p style="font-family: 'GmarketSansMedium'; color: white;">í”„ë¡œí•„ ì‚¬ì§„ì„ ì—…ë¡œë“œ í•´ì£¼ì„¸ìš”!</p>
								</figure>
							</div>

						</div>
						<div class="col-lg-6">
							<div class="reg-from" style="margin-top: 60px; margin-bottom: 100px;">
								<span>íšŒì›ê°€ì…ğŸ§‘â€ğŸš€</span>
								<p>We believe in music Welcome If entertainment ğŸµ</p>

								<form action="/signup.do" class="c-form" method="post" id="signupForm" enctype="multipart/form-data">
									<div class="row merged10">
										<label>ğŸ†” ì•„ì´ë””</label>
										<div class="col-lg-12 col-md-12 col-sm-12">
											<input class="mb-2" id="userId" name="userId" type="text" placeholder="ID">
											<button type="button" id="idChkBtn" class="main-btn" data-ripple="">ì¤‘ë³µí™•ì¸</button>
										</div>
										<div class="errors">${userId }</div>

										<label>ğŸ‘‘ ì´ë¦„</label>
										<div class="col-lg-12 col-md-12 col-sm-12">
											<input class="mb-2"  id="userName" name="userName" type="text" placeholder="Name">
										</div>

										<label>ğŸ” ë¹„ë°€ë²ˆí˜¸</label>
										<div class="col-lg-6 col-md-6 col-sm-6">
										    <input id="userPw" name="userPw" class="mb-2" type="password" placeholder="Password">
										</div>
										
										<div class="col-lg-6 col-md-6 col-sm-6">
										    <input id="userPw1" name="userPw1" class="mb-2" type="password" placeholder="Retype Password">
										</div>
										<div id="message"></div>

										
										
										
										<label>ğŸ’Œ ì´ë©”ì¼</label>
										<div class="col-lg-6 col-md-6 col-sm-6">
											<input type="text" name="memberEmail" id="memberEmail1" class="mb-2" type="text" placeholder="Email">
										</div>

										<div class="col-lg-6 col-md-6 col-sm-6">
											<select class="form" name="memberEmail" id="memberEmail2">
												<option selected="selected" disabled="true">ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
												<option>@naver.com</option>
												<option>@daum.net</option>
												<option>@gmail.com</option>
												<option>@hanmail.com</option>
												<option>@yahoo.co.kr</option>
											</select>
										</div>

										<div class="col-lg-12 col-md-12 col-sm-12">
											<input class="form-control mail-check-input" placeholder="ì¸ì¦ë²ˆí˜¸ 6ìë¦¬ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!" disabled="disabled" maxlength="6">
										</div>
										<button class="main-btn" type="button"  data-ripple="" id="mail-Check-Btn">ì´ë©”ì¼ ì¸ì¦ë²ˆí˜¸ ë°œì†¡</button>
										<span id="mail-check-warn" style="margin-bottom: 10px;"></span>
										
										<label>ğŸ‘« ì„±ë³„</label>
										<div class="col-lg-12 col-md-12 col-sm-12">
											<div class="gender mb-2">
												<div class="form-radio">
													<div class="radio" style="border: none; background: none; display:  flex;">
														<label style="width: 100px;">
															<input type="radio" class="male" id="memGenderM" name="memberGender" value="M" checked="checked"><i class="check-box"></i>ë‚¨ì
														</label>
														<label>
															<input type="radio" id="memGenderF" name="memberGender" value="F"><i class="check-box"></i>
															ì—¬ì
														</label>
													</div>
												</div>
											</div>
										</div>

										<label >ğŸ“… ìƒë…„ì›”ì¼</label>
										<div class="col-lg-4 col-md-4 col-sm-4">
											<select id="yearSelect" name="memberBirth" class="form-control">
												<option value="">ë…„</option>
											</select>
										</div>
										<div class="col-lg-4 col-md-4 col-sm-4">
											<select id="monthSelect" name="memberBirth" class="form-control">
												<option value="">ì›”</option>
											</select>
										</div>
										<div class="col-lg-4 col-md-4 col-sm-4">
											<select id="daySelect" name="memberBirth" class="form-control">
												<option value="">ì¼</option>
											</select>
										</div>

										<!--ê°„ê²©ìš© ì§€ìš°ë©´ ì•ˆë©ë‹ˆë‹¤ !! -->
										<div class="line-spacing"></div>

										<label for="address">ğŸ“« ìš°í¸ë²ˆí˜¸</label>
										<div class="col-lg-12 col-md-12 col-sm-12">
											<input class="mb-2" type="text" placeholder="postcode"  id="memberPostcode" name="memberPostcode">
											<button class="main-btn" type="button" data-ripple="" onclick="DaumPostcode()">
												ìš°í¸ë²ˆí˜¸ ì°¾ê¸°
											</button>
										</div>
										<label>ğŸš© ì£¼ì†Œ</label>
										<div class="col-lg-7 col-md-7 col-sm-7">
											<input class="mb-2" type="text"  id="memberAddress1"
											name="memberAddress1" placeholder="address1">
										</div>
										<div class="col-lg-5 col-md-5 col-sm-5">
											<input class="mb-2" type="text" placeholder="ìƒì„¸ì£¼ì†Œ" id="memberAddress2"
												name="memberAddress2">
										</div>
										<label>ğŸ“± ì „í™”ë²ˆí˜¸</label>
										<div class="col-lg-12 col-md-12 col-sm-12">
											<input class="mb-2" type="text" id="memberTelno" name="memberTelno" placeholder="Phone">
										</div>

										<div class="col-lg-12 col-md-12 col-sm-12">
										<span><br></span>
										</div>

										<div class="col-lg-5 col-md-5 col-sm-5">
											<div class="gender mb-2">
												<label>ğŸ’¡ ì•Œë¦¼ìˆ˜ì‹  ì—¬ë¶€</label>
												<div class="form-radio">
													<div class="radio" style="border: none; background: none; display:  flex;">
														<label style="width: 250px;">
															<input type="radio" id="memberNotification1" name="memberNotification" value="Y" checked="checked"><i class="check-box"></i>ë™ì˜
														</label>
														<label>
															<input type="radio"  id="memberNotification2" name="memberNotification" value="N"><i class="check-box"></i>
															ë¹„ë™ì˜
														</label>
													</div>
												</div>
											</div>
										</div>
										<div class="col-lg-7 col-md-7 col-sm-7">
											<div class="gender mb-2">
												<label>ğŸŒ ì•Œë¦¼ ì„ íƒ</label>
												<div class="form-radio">
													<div class="radio" style="border: none; background: none; display:  flex;">
														<label>
															<input type="checkbox" id="smsCheckbox" name="notiType" value="sms"><i class="check-box"></i>SMS
														</label>
														<label>
															<input type="checkbox" id="emailCheckbox" name="notiType" value="email"><i class="check-box"></i>E-mail
														</label>
														<label>
															<input type="checkBox" id="webCheckbox" name="notiType" value="web"><i class="check-box"></i>ì›¹ ì‹¤ì‹œê°„
														</label>
													</div>
												</div>
											</div>
										</div>

										<div class="col-lg-12 col-md-12 col-sm-12">
											<span><br></span>
										</div>

										<div class="col-lg-5 col-md-5 col-sm-5">
											<label>ğŸš¨ ìë™ê°€ì…ë°©ì§€</label>
											<label for="recaptcha" class="control-label col-sm-2"><span class="rq"></span></label>
											<div class="col-sm-6">
												<div class="g-recaptcha" data-sitekey="6LcKxUgpAAAAAAN-TGBKRTy8hzXUodck7LrXEUoA"></div>
												<span id="recaptchaError" class="rq"></span>
											</div>
										</div>
										<div class="col-lg-7 col-md-7 col-sm-7">
											<div class="gender mb-2">
												<label>ğŸš€ ì•Œë¦¼ìˆ˜ì‹  ì±„ë„ ì„ íƒ</label>
												<div class="form-radio">
													<div class="radio" style="border: none; background: none; display:  flex;">
														<label>
															<input type="checkbox" id="commnotiSetting" name="notiSetting" checked="checked" value="power" ><i class="check-box"></i>ì»¤ë®¤ë‹ˆí‹°
														</label>
														<label>
															<input type="checkbox" id="goodsnotiSetting" name="notiSetting" checked="checked" value="book"><i class="check-box"></i>êµ¿ì¦ˆìƒµ
														</label>
														<label>
															<input type="checkbox" id="evennotiSetting" name="notiSetting" checked="checked" value="movie" ><i class="check-box"></i>ì´ë²¤íŠ¸
														</label>
													</div>
												</div>
											</div>
										</div>
										<div class="col-lg-12 col-md-12 col-sm-12 mb-2">
											<div class="checkbox mb-1">
												<label>
													<input type="checkbox" checked="checked"><i class="check-box"></i>
													ì„œë¹„ìŠ¤Â·ì´ë²¤íŠ¸ ì •ë³´ ìˆ˜ì‹ ì— ë™ì˜í•©ë‹ˆë‹¤.
												</label>
											</div>
										</div>
										<div class="col-lg-8 col-md-6 mt-2">
											<span class="reg-with">Register With</span>
											<ul class="social-reg">
												<li><a class="facebook" href="#" title="" data-ripple="">êµ¿ì¦ˆìƒµ ì´ìš©</a></li>
												<li><a class="twitter" href="#" title="" data-ripple="">IF ì»¤ë®¤ë‹ˆí‹°</a></li>
											</ul>
										</div>
										<div class="col-lg-4 col-md-6 mt-2">
											<input type="submit" id="signUpBtn" value="íšŒì›ê°€ì…">
										</div>
									</div>
								<sec:csrfInput/>
								</form>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
	</div>
<script type="text/javascript">
header = $("meta[name='_csrf_header']").attr("content");
token = $("meta[name='_csrf']").attr("content");
// ë™ì˜/ë¹„ë™ì˜ ë¼ë””ì˜¤ ë²„íŠ¼ ì„ íƒ ì‹œ ì²˜ë¦¬
document.querySelectorAll('input[type="radio"][name="memberNotification"]').forEach(function(radio) {
    radio.addEventListener('change', function() {
        if (this.value === 'Y') {
            document.querySelectorAll('input[type="checkbox"][name="notiSetting"]').forEach(function(checkbox) {
                checkbox.disabled = false;
            });
        } else {
            document.querySelectorAll('input[type="checkbox"][name="notiSetting"]').forEach(function(checkbox) {
                checkbox.disabled = true;
                checkbox.checked = false;
            });
        }
    });
});
document.querySelectorAll('input[type="radio"][name="memberNotification"]').forEach(function(radio) {
    radio.addEventListener('change', function() {
        if (this.value === 'Y') {
            document.querySelectorAll('input[type="checkbox"][name="notiType"]').forEach(function(checkbox) {
                checkbox.disabled = false;
            });
        } else {
            document.querySelectorAll('input[type="checkbox"][name="notiType"]').forEach(function(checkbox) {
                checkbox.disabled = true;
                checkbox.checked = false;
            });
        }
    });
});

																									

document.querySelectorAll('input[type="radio"][name="memberNotification"]').forEach(function(radio) {
    radio.addEventListener('change', function() {
        if (this.value === 'Y') {
            document.querySelectorAll('input[type="checkbox"][name="notiType"]').forEach(function(checkbox) {
                checkbox.disabled = false;
            	document.getElementById('commnotiSetting').checked = true;
                document.getElementById('goodsnotiSetting').checked = true;
                document.getElementById('evennotiSetting').checked = true;
            	document.getElementById('smsCheckbox').checked = true;
                document.getElementById('emailCheckbox').checked = true;
                document.getElementById('webCheckbox').checked = true;
            });
        } else {
            document.querySelectorAll('input[type="checkbox"][name="notiType"]').forEach(function(checkbox) {
                checkbox.disabled = true;
                checkbox.checked = false;
            });
        }
    });
});



//ê¸°ë³¸ì´ë¯¸ì§€ ìˆ¨ê¸°ê¸°
function previewFile() {
        var fileInput = document.getElementById('imgFile');
        var previewImage = document.getElementById('defaultImage');
        var label = document.querySelector('.custom-file-label');

        var file = fileInput.files[0];
        var reader = new FileReader();

        reader.onloadend = function () {
            previewImage.src = reader.result;
            label.textContent = file.name;
        };

        if (file) {
            reader.readAsDataURL(file);
        } else {
            previewImage.src = "${pageContext.request.contextPath }/resources/images/user.png"; 
        }
    }




$(document).ready(function(){
    $("#imgFile").change(function() {
        readURL(this);
    });
});

//ë¯¸ë¦¬ë³´ê¸°
function readURL(input) {
    if (input.files && input.files[0]) {
        var reader = new FileReader();
        
        reader.onload = function(e) {
            $('#imagePreview').html('<img src="' + e.target.result + '" alt="ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸°">');
        }
        
        reader.readAsDataURL(input.files[0]);
    }
}
$(function(){
header = $("meta[name='_csrf_header']").attr("content");
token = $("meta[name='_csrf']").attr("content");

var idCheckFlag = false;
var idChkBtn=$("#idChkBtn");
var signUpBtn=$("#signUpBtn");
var signupForm = $("#signupForm");	
var imgFile=$("#imgFile");





        signUpBtn.on("click", function(event) {
            event.preventDefault(); 

            
            var userId = $("#userId").val();
            var userPw = $("#userPw").val();
            var userName = $("#userName").val();
            var memberTelno = $("#memberTelno").val();
            var memberEmail1 = $("#memberEmail1").val();
            var memberEmail2 = $("#memberEmail2").val();
            var memberPostcode = $("#memberPostcode").val();
            var memberAddress1 = $("#memberAddress1").val();
            var memberNotification = $("input[name='memberNotification']:checked").val(); 
            var notiType = [];
            var notiSetting = [];

            $("input[name='notiType']:checked").each(function() {
                notiType.push($(this).val());
            });

            $("input[name='notiSetting']:checked").each(function() {
                notiSetting.push($(this).val());
            });
            if (userId === null || userId === "") {
                Swal.fire({
                    icon: "error",
                    title: "ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”",
                    showConfirmButton: false,
                    timer: 1500
                });
                $("#userId").focus(); // ì•„ì´ë”” ì…ë ¥ë€ì— í¬ì»¤ìŠ¤ ë§ì¶¤
                return;  
            } else if (!/^[a-zA-Z0-9]{8,12}$/.test(userId)) {
                Swal.fire({
                    icon: "error",
                    title: "ì•„ì´ë””ëŠ” ì˜ë¬¸ ëŒ€ì†Œë¬¸ìì™€ ìˆ«ìë¡œ 8~12ì ì´ë‚´ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”",
                    showConfirmButton: false,
                    timer: 1500
                });
                $("#userId").focus(); 
                return;  
            }

            if (userPw === null || userPw === "") {
                Swal.fire({
                    icon: "error",
                    title: "ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”",
                    showConfirmButton: false,
                    timer: 1500
                });
                $("#userPw").focus(); 
                return;  
            } else if (!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/.test(userPw)) {
                Swal.fire({
                    icon: "error",
                    title: "ë¹„ë°€ë²ˆí˜¸ëŠ” ì˜ë¬¸ ëŒ€ì†Œë¬¸ì, ìˆ«ìë¥¼ í¬í•¨í•˜ì—¬ 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤",
                    showConfirmButton: false,
                    timer: 1500
                });
                $("#userPw").focus(); 
                return;  
            }
            if (userName === null || userName === "") {
                Swal.fire({
                    icon: "error",
                    title: "ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”",
                    showConfirmButton: false,
                    timer: 1500
                });
                $("#userName").focus(); 
                return;  
            } else if (!/^[a-zA-Zê°€-í£]{2,10}$/.test(userName)) {
                Swal.fire({
                    icon: "error",
                    title: "ì´ë¦„ì€ í•œê¸€ ë˜ëŠ” ì˜ë¬¸ ëŒ€ì†Œë¬¸ìë¡œ 2~10ì ì´ë‚´ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”",
                    showConfirmButton: false,
                    timer: 1500
                });

                $("#userName").focus();
                return;  
            }

         
            if (memberTelno === null || memberTelno === "") {
                Swal.fire({
                    icon: "error",
                    title: "ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”",
                    showConfirmButton: false,
                    timer: 1500
                });
                $("#memberTelno").focus(); 
                return;  
            } else if (!/^\d{3}-\d{3,4}-\d{4}$/.test(memberTelno)) {
                Swal.fire({
                    icon: "error",
                    title: "ì „í™”ë²ˆí˜¸ì˜ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤ (ì˜ˆ: 010-1234-5678)",
                    showConfirmButton: false,
                    timer: 1500
                });
                $("#memberTelno").focus(); 
                return;  
            }

            if (memberEmail1 === null) {
                Swal.fire({
                    icon: "error",
                    title: "ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”",
                    showConfirmButton: false,
                    timer: 1500
                });
                $("#memberEmail1").focus(); 
                return;  
            }

            // ìš°í¸ë²ˆí˜¸ ìœ íš¨ì„± ê²€ì‚¬
            if (memberPostcode === null || memberPostcode === "") {
                Swal.fire({
                    icon: "error",
                    title: "ìš°í¸ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”",
                    showConfirmButton: false,
                    timer: 1500
                });
                $("#memberPostcode").focus(); 
                return;  
            }

            // ì£¼ì†Œ ìœ íš¨ì„± ê²€ì‚¬
            if (memberAddress1 === null || memberAddress1 === "") {
                Swal.fire({
                    icon: "error",
                    title: "ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”",
                    showConfirmButton: false,
                    timer: 1500
                });
                $("#memberAddress1").focus(); 
                return;  
            }

       
            signupForm.submit();
        });

    
idChkBtn.on("click", function(){
	var userId=$("#userId").val();

	if(userId == null || userId == ""){
		Swal.fire({
			  icon: "warning",
			  title: "ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”",
			  showConfirmButton: false,
			  timer: 1500
			});
		$("#userId").focus();
		return false;
	}	
    if (!/^[a-zA-Z0-9]{8,12}$/.test(userId)) {
        Swal.fire({
            icon: "error",
            title: "ì•„ì´ë””ëŠ” ì˜ë¬¸ ëŒ€ì†Œë¬¸ìì™€ ìˆ«ìë¡œ 8~12ì ì´ë‚´ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”",
            showConfirmButton: false,
            timer: 1500
        });
        return false;
    }
	
	$.ajax({
		url : "/idChk",
		type : "POST",
		beforeSend: function(xhr){	
			xhr.setRequestHeader(header, token);
		},
		data : JSON.stringify({
			userId : userId
		}),
		contentType : "application/json;charset=utf-8",
		success : function(res){
			console.log(res);
			if(res == "NOTEXIST"){	
				Swal.fire({
					  icon: "success",
					  title: "ì‚¬ìš©ê°€ëŠ¥í•œ ì•„ì´ë”” ì…ë‹ˆë‹¤",
					  showConfirmButton: false,
					  timer: 1500
					});
				idCheckFlag = true;
				signUpBtn.prop('disabled', false);
			}else {		
				Swal.fire({
					  icon: "error",
					  title: "ì‚¬ìš©ì¤‘ì¸ ì•„ì´ë””ì…ë‹ˆë‹¤.",
					  showConfirmButton: false,
					  timer: 1500
				});
				signUpBtn.prop('disabled', true);
			}
		}
	});
});

imgFile.on("change", function(event){
    var file = event.target.files[0];
    
    if(isImageFile(file)){  // ì´ë¯¸ì§€ íŒŒì¼ì¸ ê²½ìš°
        var reader = new FileReader();
        reader.onload = function(e){
            $("#profileImg").attr("src", e.target.result);
        }
        reader.readAsDataURL(file);
    }else {
        alert("ì´ë¯¸ì§€ íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”!");
    }
});



});

function isImageFile(file){
	var ext = file.name.split(".").pop().toLowerCase();	
	return ($.inArray(ext, ["jpg", "jpeg", "png", "gif"]) === -1) ? false : true;
}



//ë¹„ë°€ë²ˆí˜¸
document.addEventListener('DOMContentLoaded', function() {
    var pwInput = document.getElementById('userPw');
    var confirmpwInput = document.getElementById('userPw1');
    var message = document.getElementById('message');

    function validate() {
        if (confirmpwInput.value !== '') {
            if (pwInput.value === confirmpwInput.value) {
                message.innerHTML = 'ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•©ë‹ˆë‹¤.';
                message.style.color = 'green';
            } else {
                message.innerHTML = 'ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.';
                message.style.color = 'red';
            }
        } else {
            message.innerHTML = '';
        }
    }

    pwInput.addEventListener('input', validate);
    confirmpwInput.addEventListener('input', validate);
});

$('#mail-Check-Btn').click(function() {
	const memberEmail1 = $('#memberEmail1').val(); 
	const memberEmail2 = $('#memberEmail2').val(); 
	const email1=memberEmail1; 
	const email2=memberEmail2; 
	const email=email1+email2; 
	
	
	if (!memberEmail1) {
		Swal.fire({
			  icon: "error",
			  title: "ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”",
			  showConfirmButton: false,
			  timer: 1500
			});
		return;
	}
	
	console.log('ì™„ì„±ëœ ì´ë©”ì¼ : ' + email);
	const checkInput = $('.mail-check-input') 
	
	$.ajax({
		type : 'get',
		beforeSend: function(xhr){	// ë°ì´í„° ì „ì†¡ ì „, í—¤ë”ì— csrfê°’ ì„¤ì •
			xhr.setRequestHeader(header, token);
		},
		url : "/mailCheck?email="+email, 
		success : function (data) {
			console.log("data : " +  data);
			checkInput.attr('disabled',false);
			code =data;
			Swal.fire({

				  icon: "success",
				  title: "ì „ì†¡ ë˜ì—ˆìŠµë‹ˆë‹¤.",
				  showConfirmButton: false,
				  timer: 1500
				});
		}			
	}); 
}); 

// ì¸ì¦ë²ˆí˜¸ ë¹„êµ 
// blur -> focusê°€ ë²—ì–´ë‚˜ëŠ” ê²½ìš° ë°œìƒ
$('.mail-check-input').blur(function () {
	const inputCode = $(this).val();
	const $resultMsg = $('#mail-check-warn');
	
	if(inputCode === code){
		$resultMsg.html('ì¸ì¦ë²ˆí˜¸ê°€ ì¼ì¹˜í•©ë‹ˆë‹¤.');
		$resultMsg.css('color','green');
		$('#mail-Check-Btn').attr('disabled',true);
		$('#memberEmail1').attr('readonly',true);
		$('#memberEmail2').attr('readonly',true);
		$('#memberEmail2').attr('onFocus', 'this.initialSelect = this.selectedIndex');
         $('#memberEmail2').attr('onChange', 'this.selectedIndex = this.initialSelect');
	}else{
		$resultMsg.html('ì¸ì¦ë²ˆí˜¸ê°€ ë¶ˆì¼ì¹˜ í•©ë‹ˆë‹¤. ë‹¤ì‹œ í™•ì¸í•´ì£¼ì„¸ìš”!.');
		$resultMsg.css('color','red');
	}
});

function DaumPostcode() {
    new daum.Postcode({
        oncomplete: function(data) {
            // íŒì—…ì—ì„œ ê²€ìƒ‰ê²°ê³¼ í•­ëª©ì„ í´ë¦­í–ˆì„ë•Œ ì‹¤í–‰í•  ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ë¶€ë¶„.

            // ê° ì£¼ì†Œì˜ ë…¸ì¶œ ê·œì¹™ì— ë”°ë¼ ì£¼ì†Œë¥¼ ì¡°í•©í•œë‹¤.
            // ë‚´ë ¤ì˜¤ëŠ” ë³€ìˆ˜ê°€ ê°’ì´ ì—†ëŠ” ê²½ìš°ì—” ê³µë°±('')ê°’ì„ ê°€ì§€ë¯€ë¡œ, ì´ë¥¼ ì°¸ê³ í•˜ì—¬ ë¶„ê¸° í•œë‹¤.
            var addr = ''; // ì£¼ì†Œ ë³€ìˆ˜
            var extraAddr = ''; // ì°¸ê³ í•­ëª© ë³€ìˆ˜

            //ì‚¬ìš©ìê°€ ì„ íƒí•œ ì£¼ì†Œ íƒ€ì…ì— ë”°ë¼ í•´ë‹¹ ì£¼ì†Œ ê°’ì„ ê°€ì ¸ì˜¨ë‹¤.
            if (data.userSelectedType === 'R') { // ì‚¬ìš©ìê°€ ë„ë¡œëª… ì£¼ì†Œë¥¼ ì„ íƒí–ˆì„ ê²½ìš°
                addr = data.roadAddress;
            } else { // ì‚¬ìš©ìê°€ ì§€ë²ˆ ì£¼ì†Œë¥¼ ì„ íƒí–ˆì„ ê²½ìš°(J)
                addr = data.jibunAddress;
            }

            // ì‚¬ìš©ìê°€ ì„ íƒí•œ ì£¼ì†Œê°€ ë„ë¡œëª… íƒ€ì…ì¼ë•Œ ì°¸ê³ í•­ëª©ì„ ì¡°í•©í•œë‹¤.
            if(data.userSelectedType === 'R'){
                // ë²•ì •ë™ëª…ì´ ìˆì„ ê²½ìš° ì¶”ê°€í•œë‹¤. (ë²•ì •ë¦¬ëŠ” ì œì™¸)
                // ë²•ì •ë™ì˜ ê²½ìš° ë§ˆì§€ë§‰ ë¬¸ìê°€ "ë™/ë¡œ/ê°€"ë¡œ ëë‚œë‹¤.
                if(data.bname !== '' && /[ë™|ë¡œ|ê°€]$/g.test(data.bname)){
                    extraAddr += data.bname;
                }
                // ê±´ë¬¼ëª…ì´ ìˆê³ , ê³µë™ì£¼íƒì¼ ê²½ìš° ì¶”ê°€í•œë‹¤.
                if(data.buildingName !== '' && data.apartment === 'Y'){
                    extraAddr += (extraAddr !== '' ? ', ' + data.buildingName : data.buildingName);
                }
            }

            // ìš°í¸ë²ˆí˜¸ì™€ ì£¼ì†Œ ì •ë³´ë¥¼ í•´ë‹¹ í•„ë“œì— ë„£ëŠ”ë‹¤.
            document.getElementById('memberPostcode').value = data.zonecode;
            document.getElementById("memberAddress1").value = addr;
            // ì»¤ì„œë¥¼ ìƒì„¸ì£¼ì†Œ í•„ë“œë¡œ ì´ë™í•œë‹¤.
            document.getElementById("memberAddress2").focus();
        }
    }).open();
}
	
	//ë…„, ì›”, ì¼ì— ëŒ€í•œ ì˜µì…˜ì„ ì¶”ê°€í•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜ ì •ì˜
	function addOptions(selectElement, start, end) {
	    for (let i = start; i <= end; i++) {
	        let option = document.createElement('option');
	        option.value = i;
	        option.text = i;
	        selectElement.appendChild(option);
	    }
	}
	
	// ë…„ë„ ì˜µì…˜ ì¶”ê°€
	let yearSelect = document.getElementById('yearSelect');
	let currentYear = new Date().getFullYear();
	addOptions(yearSelect, currentYear - 100, currentYear);
	
	// ì›” ì˜µì…˜ ì¶”ê°€
	let monthSelect = document.getElementById('monthSelect');
	for (let i = 1; i <= 12; i++) {
	    let option = document.createElement('option');
	    option.value = i;
	    option.text = i;
	    monthSelect.appendChild(option);
	}
	
	// ì¼ ì˜µì…˜ ì¶”ê°€
	let daySelect = document.getElementById('daySelect');
	for (let i = 1; i <= 31; i++) {
	    let option = document.createElement('option');
	    option.value = i;
	    option.text = i;
	    daySelect.appendChild(option);
	}
	
	document.getElementById('commnotiSetting').checked = true;
    document.getElementById('goodsnotiSetting').checked = true;
    document.getElementById('evennotiSetting').checked = true;

    
    
//     // ì²´í¬ë°•ìŠ¤ ì²´í¬
//     document.getElementById('commnotiSetting').addEventListener('change', function() {
//         console.log("commnotiSetting: " + this.checked);
//     });

//     document.getElementById('emailCheckbox').addEventListener('change', function() {
//         console.log("goodsnotiSetting: " + this.checked);
//     });

//     document.getElementById('webCheckbox').addEventListener('change', function() {
//         console.log("evennotiSetting: " + this.checked);
//     });
    
    
	document.getElementById('smsCheckbox').checked = true;
    document.getElementById('emailCheckbox').checked = true;
    document.getElementById('webCheckbox').checked = true;

    
    
//     // ì²´í¬ë°•ìŠ¤ ì²´í¬
//     document.getElementById('smsCheckbox').addEventListener('change', function() {
//         console.log("sms: " + this.checked);
//     });

//     document.getElementById('emailCheckbox').addEventListener('change', function() {
//         console.log("email: " + this.checked);
//     });

//     document.getElementById('webCheckbox').addEventListener('change', function() {
//         console.log("web: " + this.checked);
//     });
		
</script>

	<script src="${pageContext.request.contextPath }/resources/js/main.min.js"></script>
	<script src="${pageContext.request.contextPath }/resources/js/script.js"></script>
</body>

</html>