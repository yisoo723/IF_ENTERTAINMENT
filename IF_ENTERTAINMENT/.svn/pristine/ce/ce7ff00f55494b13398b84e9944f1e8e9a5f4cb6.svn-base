<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script type="text/javascript" src="${pageContext.request.contextPath }/resources/ckeditor/ckeditor.js"></script>

<div class="gap no-gap">
	<div class="inner-bg">
		<div class="element-title">
			<h4>IR 행사일정 등록</h4>
		</div>
	<form method="post" action="/entertain/ir/insert.do" id="IREventForm">
		<c:if test="${status eq 'u' }">
			<input type="hidden" name="boNo" value="${irevent.bfNo }"/>
		</c:if>		
		<div class="add-prod-from">
			<div class="row">
				<div class="col-md-12">
					<label>제목</label>
					<input type="text" id="Title" name ="bfTitle"
					value="${irevent.bfTitle }"
					placeholder="제목을 입력해주세요">
				</div>
				<div class="col-md-12">
					<label>일정 등록</label>
					<input type="text" id="irSchedule" name ="irSchedule"
					value="${irevent.irSchedule }"
					placeholder="일정을 입력해주세요">
				</div>
				<div class="col-md-12">
					<label>장소 등록</label>
					<input type="text" id="irPlace" name ="irPlace"
					value="${irevent.irPlace }"
					placeholder="장소를 입력해주세요">
				</div>
				<div class="col-md-12">
					<label>내용 입력</label>
					<textarea id="irContent" cols="30" rows="10" placeholder="내용을 입력해주세요"></textarea>
				</div>
				<div class="col-md-12">
					<div class="buttonz">
					<c:if test="${status ne 'u' }">
						<button type="submit">등록</button>
					</c:if> 	
					<c:if test="${status ne 'u' }">
						<button type="submit">취소</button>
					</c:if> 
					</div>
				</div>
			</div>
		</div>
	</form>
	</div>
</div>

<!-- 내일 요기 수정  -->
<script type="text/javascript">
$(function(){
	CKEDITOR.replace("irContent", {
		filebrowserUploadUrl: '/imageUpload.do?${_csrf.parameterName}=${_csrf.token}'
	});
	
	var noticeForm = $("#IREventForm");
	var listBtn = $("#listBtn");
/* 	var addBtn = $("#addBtn"); */
	var cancelBtn = $("#cancelBtn");
	
	listBtn.on("click", function(){
		location.href = "/entertain/ir/list.do";
	});
	
	addBtn.on("click", function(){
		var title = $("#bfTitle").val();
		// ckeditor를 이용한 데이터를 가져오는 방법
		var content = CKEDITOR.instances.irContent.getData();
		
		if(title == null || title == ""){
			alert("제목을 입력해주세요!");
			$("#bfTitle").focus();
			return false;
		}
		
		if(content == null || content == ""){
			alert("내용을 입력해주세요!");
			$("#irContent").focus();
			return false;
		}
		
		if($(this).val() == "수정"){
			IREventForm.attr("action", "/entertain/ir/update.do");
		}
		
		IREventForm.submit();
	});
	
	cancelBtn.on("click", function(){
		location.href="/entertain/ir/detail.do?bfNo=${irevent.bfNo}"
	});
	
});
</script>