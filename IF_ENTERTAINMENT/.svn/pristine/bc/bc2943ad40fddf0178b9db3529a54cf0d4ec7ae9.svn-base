<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<div class="central-meta postbox">
	<!-- Slider main container -->
	<div class="container">
		<!-- Swiper -->
		<div class="swiper mySwiper">
			<div class="swiper-wrapper" pagination="true"
				pagination-clickable="true" navigation="true" space-between="30"
				centered-slides="true" autoplay-delay="2500"
				autoplay-disable-on-interaction="false">
				<c:forEach items="${goodsNoticeList }" var="goodsNotice" >
					<div class="swiper-slide swiper-slide-1">
						<a><img alt="" src="${goodsNotice.baSavepath }"></a>
					</div>
				</c:forEach>
				<div class="swiper-slide swiper-slide-1"></div>
				<div class="swiper-slide swiper-slide-2"></div>
				<div class="swiper-slide swiper-slide-3"></div>
				<div class="swiper-slide swiper-slide-4"></div>
				<div class="swiper-slide swiper-slide-5"></div>
				<div class="swiper-slide swiper-slide-6"></div>
				<div class="swiper-slide swiper-slide-7"></div>
				<div class="swiper-slide swiper-slide-8"></div>
				<div class="swiper-slide swiper-slide-9"></div>
				<div class="swiper-slide swiper-slide-10"></div>
			</div>
			<div class="swiper-pagination"></div>
		</div>
		<!-- If we need navigation buttons -->
		<div class="swiper-button-prev">
		</div>
		<div class="swiper-button-next">
		</div>
	</div>
</div>

<div class="central-meta">
	<div class="row remove-ext-40">
		<div class="col-lg-12">
			<h4 class="title">My Artist
				<!-- <a class="" href="#" title="">View All</a> -->
			</h4>
		</div>
		<c:forEach items="${mycommunityList }" var="mycommunity" varStatus="idx">
		
			<div class="col-lg-2 col-md-4 col-sm-6">
				<div class="game-box">
					<div class="memberships">
						<a href="#" title="">
							<img src="${mycommunity.agProfile }" alt="">
						</a></div>
					<div class="game-meta">
						<h5><a href="#" title="">${mycommunity.agId }</a></h5>
					</div>
				</div>
			</div>
		</c:forEach>
	</div>
</div>

<div id="events"></div>

<div class="central-meta">
	<div class="row remove-ext-40">
		<div class="col-lg-12">
			<h4 class="title">새로운 아티스트들을 만나보세요!
				<!-- <a class="" href="#" title="">View All</a> -->
			</h4>
		</div>
		<div class="col-lg-2 col-md-4 col-sm-6">
			<div class="game-box">
				<figure><a href="#" title=""><img src="https://phinf.wevpstatic.net/MjAyMzA4MTFfODgg/MDAxNjkxNzQ0MTg0MjQz.Zwj4J6IfgCieQBAzOX6Ds1pPdOzGy9zlByY3X79WD70g.xDFhMl5zvmViMAykqRPKFiLsIiLQZn0NbhfIWSW1ARog.PNG/7622905427894516277773510-ed23-4099-87cc-c200485c2f2d.png?type=w2200" alt=""></a></figure>
				<div class="game-meta">
					<h5><a href="#" title="">STAYC</a></h5>
					<a href="#" title=""><i class="fa fa-plus-square"></i>가입하기</a>
				</div>
			</div>
		</div>
	</div>
</div>

<script type="text/javascript">
	const eventsDiv = document.getElementById('events');
	
	const eventSource = new EventSource('/api/events', {
		headers : {
			'Accept' : 'text/event-stream'
		}
	});
	
	eventSource.onmessage = function(event) {
		const newEvent = document.createElement('div');
		newEvent.textContent = event.data;
		eventsDiv.appendChild(newEvent);
	};
</script>