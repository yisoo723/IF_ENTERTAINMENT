<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://www.springframework.org/security/tags" prefix="sec" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>


<div class="central-meta OrderIssue">
	<h1 class="create-post">주문내역 상세정보</h1>
	<div class="cart-sec" style="margin-bottom: 30px">
		<table class="table table-responsive OrderIssue-table">
			<tr>
				<th>주문번호</th>
				<th>상품</th>
				<th>수량</th>
				<th>결제금액</th>
				<th>상태</th>
			</tr>
			<c:set value="${orderDetailList }" var="myOrderDetailList"/>
			<c:choose>
				<c:when test="${empty myOrderDetailList }">
					<tr>
						<td colspan="5">주문 디테일이 존재하지 않습니다.</td> 
					</tr>
				</c:when>
				<c:otherwise>
					<c:forEach items="${myOrderDetailList }" var="myOrderDetail">
						<tr>
							<td>
								<div>
									<span class="cart-prices"> 
										<ins>
											<span class="woocommerce-Price-amount amount">${myOrderDetail.orderNo }</span>
										</ins> 
									</span>
								</div>
							</td>
							<td>
								<div class="cart-avatar issu-imgbox">
				
									<img src="${myOrderDetail.goodsThumbnail }" alt="">
								</div>
								<div class="cart-meta issue-pro-con">
									<span class="issue-pro-artist">${myOrderDetail.goodsArtist }</span>
									<span class="issue-pro-title">${myOrderDetail.goodsName }</span>
								</div>
							</td>
							<td>
								<span class="cart-prices" style="line-height: 68px"> 
									<ins>
										<span class="woocommerce-Price-amount amount">${myOrderDetail.odQuantity }</span>
									</ins> 
								</span>
							</td>
							<td>
								<span class="cart-prices" style="line-height: 68px"> 
									<ins>
										<span class="woocommerce-Price-amount amount">
											<fmt:formatNumber value="${myOrderDetail.odPrice }" pattern="#,###"/>
										</span>
									</ins> 
								</span>
							</td>
							<td class="orderdetail_issueBtn">
								<span class="cart-prices"> 
									<ins>
										<span class="woocommerce-Price-amount amount">
											<c:choose>
												<c:when test="${myOrderDetail.orderDelivery eq 'N'}">
													<span class="woocommerce-Price-currencySymbol">배송전</span>
												</c:when>
												<c:otherwise>
													<div class="Btn_box">
														<a href="#" title="" class="main-btn create-pst order-cancelBtn" data-ripple="">교환 요청</a>
													</div>												
												</c:otherwise>
											</c:choose>
										</span>
									</ins> 
								</span>
							</td>
						</tr>
					</c:forEach>
				</c:otherwise>
			</c:choose>
			
		</table>
	</div>
	<div class="row">
		<div class="col-lg-6">
			<div class="central-meta">
				<div class="create-post address">
					<span class="address-title">배송지 정보</span>
					<a href="#" title="" class="main-btn" data-ripple="">배송지 변경</a>
				</div>
				<div class="about-chnl">
					<ul>
						<li>
							<span>받는분 :</span> 
							<span style="width: 400px">${myOrderDetailList[0].maReciever }</span>
						</li>
						<li>
							<span>주소 :</span> 
							<span style="width: 400px">${myOrderDetailList[0].maAddress1 } ${myOrderDetailList[0].maAddress2 } 
							(${myOrderDetailList[0].maPostcode })</span>
						</li>
						<li>
							<span>연락처 :</span> 
							<span style="width: 400px">010-0000-0000</span>
						</li>
					</ul>
				</div>
			</div>
		</div>
		<div class="col-lg-6">
			<div class="amount-area">
				<div class="total-area detail-total">
					<ul>
						<c:choose>
							<c:when test="${empty myOrderDetailList }">
								<span>주문내용이 없습니다.</span>
							</c:when>
							<c:otherwise>
								<c:forEach items="${myOrderDetailList }" var="myOrderDetail">
									<li>
										<span>${myOrderDetail.goodsName }:</span>
										<i> <fmt:formatNumber value="${myOrderDetail.odPrice }" pattern="#,###"/>  원</i>
									</li>
								</c:forEach>
							</c:otherwise>
						</c:choose>
						<li>
							<span>Shipping:</span>
							<i>Free</i>
						</li>
						<li class="order-total">
							<span style="font-size: 25px;">ORDER TOTAL:</span>
							<i style="font-size: 25px;"><fmt:formatNumber value="${myOrderDetailList[0].orderTotalprice }" pattern="#,###"/>원</i>
						</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
</div>
